(function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"000f":function(e,t,n){e.exports=n.p+"fonts/wizardspeak.007ed356.ttf"},"009c":function(e,t,n){e.exports=n.p+"img/book-open.555e3a34.png"},"0279":function(e,t,n){},"0993":function(e,t,n){},1:function(e,t){},"231e":function(e,t,n){},"294f":function(e,t,n){},"2e94":function(e,t,n){},"2f2b":function(e,t,n){},"34ae":function(e,t,n){"use strict";var r=n("b5f6"),a=n.n(r);a.a},3865:function(e,t,n){"use strict";var r=n("3ca3b"),a=n.n(r);a.a},"3a5c":function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t}(Error);t.default=a},"3b24":function(e,t,n){},"3ca3b":function(e,t,n){},"521d":function(e,t,n){"use strict";n("4160"),n("a434"),n("159b"),Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.callbacks={}}return e.prototype.add=function(e,t){var n=this,r=this.callbacks[e];return r||(r=[],this.callbacks[e]=r),r.push(t),function(){n.rm(e,t)}},e.prototype.rm=function(e,t){void 0===t&&(t=null);var n=this.callbacks[e];if(n)if(null!==t){for(var r=0;r<n.length;r++)if(n[r]===t)return void n.splice(r,1)}else n.splice(0,n.length)},e.prototype.run=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.callbacks[e];r&&r.forEach((function(e){return e.apply(void 0,t)}))},e}();t.default=r},"522d":function(e,t,n){"use strict";var r=n("231e"),a=n.n(r);a.a},"5c0b":function(e,t,n){"use strict";var r=n("9c0c"),a=n.n(r);a.a},"6a7e":function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n("ca70"));t.ClientV0=a.default;var o=r(n("7fac"));t.ClientV1=o.default},"728c":function(e,t,n){"use strict";var r=n("9adb"),a=n.n(r);a.a},7805:function(e,t,n){var r={"./base/concrete-wall-2.png":"cd3f","./escape-test/book-closed.jpg":"8892","./escape-test/book-open.jpg":"8dbb","./escape-test/book-open.png":"009c","./fonts/wizardspeak.ttf":"000f","./puzzles/combinationA.svg":"9906","./puzzles/combinationB.svg":"c513"};function a(e){return Promise.resolve().then((function(){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}var a=r[e];return n(a)}))}a.keys=function(){return Object.keys(r)},a.id="7805",e.exports=a},"7fac":function(e,t,n){"use strict";n("4160"),n("d81d"),n("159b");var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},a.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n("bc56")),s=o(n("ca70")),c=o(n("521d")),u=function(e){function t(t){var n=e.call(this,t)||this;return n.game_events=[],n._user_data_dict={},n.callbacks_ud=new c.default,n.callbacks_ev=new c.default,n}return r(t,e),t.prototype.emitUserData=function(e){this._user_data_dict[this.user_id]=a(a({},this._user_data_dict[this.user_id]),e),this._emitCustom("user-data",e)},t.prototype.onUserData=function(e){return this.callbacks_ud.add("main",e)},t.prototype.offUserData=function(e){void 0===e&&(e=null),this.callbacks_ud.rm("main",e)},Object.defineProperty(t.prototype,"user_data",{get:function(){var e=this;return this.user_list.map((function(t){var n=e._user_data_dict[t];return n||(n={}),a({_user_id:t},n)}))},enumerable:!0,configurable:!0}),t.prototype.emitGameEvent=function(e){var t=i.default.generate().toLowerCase().substring(0,4),n="e-"+this.user_idx+"-"+this.game_events.length+"-"+t,r={event_id:n,user_id:this.user_id,data:e};this._emitCustom("game-event",r),this._addGameEvent(r)},t.prototype._addGameEvent=function(e){for(var t=this,n=e.event_id,r=e.user_id,a=e.data,o=0;o<this.game_events.length;o++)if(this.game_events[o].event_id===n)return;var i={event_id:n,user_id:r,processed:!1,data:a};this.game_events.push(i),this.game_events.forEach((function(e){e.processed||(e.processed=!0,t.callbacks_ev.run("main",e.data))}))},t.prototype.onGameEvent=function(e){return this.callbacks_ev.add("main",e)},t.prototype.offGameEvent=function(e){void 0===e&&(e=null),this.callbacks_ev.rm("main",e)},t.prototype._onCustom=function(t){var n=t.user_id,r=t.type,a=t.data;switch(r){case"user-data":return this._onUserData(n,a);case"game-event":return this._onGameEvent(n,a)}e.prototype._onCustom.call(this,t)},t.prototype._onUserData=function(e,t){this._user_data_dict[e]=a(a({},this._user_data_dict[e]),t),this.callbacks_ud.run("main",this.user_data)},t.prototype._onGameEvent=function(e,t){this._addGameEvent(t)},t.prototype._onUserList=function(t){var n=this;e.prototype._onUserList.call(this,t);var r=this.user_data[this.user_idx];this.emitUserData(r),this.game_events.forEach((function(e){n._emitCustom("game-event",e)}))},t}(s.default);t.default=u},8892:function(e,t,n){e.exports=n.p+"img/book-closed.804330e6.jpg"},"891e":function(e,t,n){"use strict";var r=n("b6f3"),a=n.n(r);a.a},"8cf1":function(e,t,n){"use strict";var r=n("ca63"),a=n.n(r);a.a},"8dbb":function(e,t,n){e.exports=n.p+"img/book-open.ab3d4867.jpg"},"92e6":function(e,t,n){var r={"./base/concrete-wall-2.png":"cd3f","./escape-test/book-closed.jpg":"8892","./escape-test/book-open.jpg":"8dbb","./escape-test/book-open.png":"009c","./fonts/wizardspeak.ttf":"000f","./puzzles/combinationA.svg":"9906","./puzzles/combinationB.svg":"c513"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="92e6"},9906:function(e,t,n){e.exports=n.p+"img/combinationA.53ccea3d.svg"},"9adb":function(e,t,n){},"9c0c":function(e,t,n){},ae99:function(e,t,n){},b5b6:function(e,t,n){"use strict";var r=n("2f2b"),a=n.n(r);a.a},b5f6:function(e,t,n){},b6f3:function(e,t,n){},b6fd:function(e,t,n){"use strict";var r=n("3b24"),a=n.n(r);a.a},c513:function(e,t,n){e.exports=n.p+"img/combinationB.cade8e81.svg"},ca63:function(e,t,n){},ca70:function(e,t,n){"use strict";n("a4d3"),n("e01a"),n("d28b"),n("a15b"),n("d3b7"),n("3ca3"),n("ddb0");var r=this&&this.__awaiter||function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):a(e.value).then(i,s)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,r&&(a=2&o[0]?r["return"]:o[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(s){o=[6,s],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)r[a]=o[i];return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n("c00c")),c=i(n("3a5c")),u=i(n("521d")),l=function(){function e(e){this.user_list=[],this.server=e,this.callbacks=new u.default}return e.prototype._connect=function(e,t,n){return void 0===t&&(t={}),r(this,void 0,void 0,(function(){var r=this;return a(this,(function(a){return[2,new Promise((function(a,o){var i=function(){r.disconnect(),o(new c.default("No connection to server"))};r.socket=s.default(r.server),r.socket.on("user-list",r._onUserList.bind(r)),r.socket.on("custom",r._onCustom.bind(r)),r.socket.on("server-close",r._onServerClose.bind(r)),r.socket.on("connect_error",i),r.socket.emit(e,t,(function(e){n(e),a()}))}))]}))}))},e.prototype.create=function(){return r(this,void 0,void 0,(function(){var e=this;return a(this,(function(t){return[2,this._connect("create",{},(function(t){e.game_id=t.game_id,e.user_id=t.user_id,e.user_list=t.user_list}))]}))}))},e.prototype.join=function(e){return r(this,void 0,void 0,(function(){var t=this;return a(this,(function(n){return[2,this._connect("join",{game_id:e},(function(e){t.game_id=e.game_id,t.user_id=e.user_id,t.user_list=e.user_list}))]}))}))},Object.defineProperty(e.prototype,"user_idx",{get:function(){for(var e=0;e<this.user_list.length;e++)if(this.user_list[e]===this.user_id)return e;return-1},enumerable:!0,configurable:!0}),e.prototype.on=function(e,t){return this.callbacks.add(e,t)},e.prototype.off=function(e,t){void 0===t&&(t=null),this.callbacks.rm(e,t)},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._emitCustom("other",{channel:e,data:o(t)})},e.prototype.disconnect=function(){this.socket.disconnect(!0)},e.prototype._onUserList=function(e){this.user_list=e.user_list},e.prototype._onCustom=function(e){var t=e.user_id,n=e.type,r=e.data;switch(n){case"other":return this._onOther(t,r)}},e.prototype._emitCustom=function(e,t){this.socket.emit("custom",{game_id:this.game_id,user_id:this.user_id,type:e,data:t})},e.prototype._onOther=function(e,t){var n,r=t.channel,a=t.data;(n=this.callbacks).run.apply(n,o([r],a))},e.prototype._onServerClose=function(){this.disconnect()},e}();t.default=l},cae4:function(e,t,n){"use strict";var r=n("2e94"),a=n.n(r);a.a},cd3f:function(e,t,n){e.exports=n.p+"img/concrete-wall-2.44e11fda.png"},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("15f5"),n("7051");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{loaded:e.loaded},attrs:{id:"app"}},[e.loaded?[e.game?n("GameVue",{attrs:{game:e.game}}):[n("IntroVue",{on:{"start-singleplayer":e.start_singleplayer}})]]:e._e()],2)},o=[],i=(n("96cf"),n("1da1")),s=n("d4ec"),c=n("bee2"),u=n("262e"),l=n("2caf"),d=n("9ab4"),p=n("60a3"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"game"}},[n("TopbarVue",{attrs:{game:e.game}}),e.game.current_room?n("RoomVue",{attrs:{room:e.game.current_room}}):e._e(),n("ButtonsVue",{attrs:{game:e.game}})],1)},h=[],v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"topbar"},[e._v(" Estás en "+e._s(e.game.current_room.name)+" ")])},m=[],b=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(s["a"])(this,n),t.apply(this,arguments)}return n}(p["c"]);Object(d["__decorate"])([Object(p["b"])()],b.prototype,"game",void 0),b=Object(d["__decorate"])([p["a"]],b);var _=b,y=_,g=(n("728c"),n("2877")),O=Object(g["a"])(y,v,m,!1,null,"63c351b1",null),j=O.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"room"},[e.loaded?n("div",[n("div",{staticClass:"container"},[n("h2",{staticClass:"title"},[e._v(" "+e._s(e.room.name)+" ")]),e._l(e.room.content,(function(t,r){return["text"===t.type?n("p",{key:e.room.name+r,domProps:{innerHTML:e._s(t.text)}}):e._e(),"image"===t.type?n("div",{key:e.room.name+r},[n("ImageVue",{attrs:{image:t.image}})],1):e._e(),"puzzle"===t.type?n("div",{key:e.room.name+r},[n("PuzzleVue",{attrs:{puzzle:t.puzzle}})],1):e._e()]}))],2)]):n("div",{staticClass:"loading"},[e._v(" Loading... ")])])},w=[],x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("figure",{staticClass:"image"},[e.image.url_prev?n("img",{attrs:{src:e.image.url_prev}}):n("img",{attrs:{src:e.image.url}}),e.image.zoom?[n("button",{staticClass:"button",on:{click:function(t){e.modal=!0}}},[e._m(0)]),e.modal?n("ImageViewerVue",{attrs:{image:e.image.url},on:{close:function(t){e.modal=!1}}}):e._e()]:e._e()],2)},C=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-search"})])}],E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"image-viewer"},[n("ModalVue",{on:{close:e.close}},[n("div",{directives:[{name:"viewer",rawName:"v-viewer",value:e.vvconfig,expression:"vvconfig"}],staticClass:"v-viewer"},e._l(e.images,(function(e){return n("img",{key:e,attrs:{src:e}})})),0),n("div",{staticClass:"toolbar buttons is-centered"},[n("button",{staticClass:"button",on:{click:e.zoomInc}},[n("i",{staticClass:"fas fa-plus"})]),n("button",{staticClass:"button",on:{click:e.zoomDec}},[n("i",{staticClass:"fas fa-minus"})]),n("button",{staticClass:"button",on:{click:e.rotateL}},[n("i",{staticClass:"fas fa-undo-alt"})]),n("button",{staticClass:"button",on:{click:e.rotateR}},[n("i",{staticClass:"fas fa-redo-alt"})])])])],1)},z=[],R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal is-active"},[n("div",{staticClass:"modal-background",on:{click:e.close}}),n("div",{staticClass:"modal-content"},[e._t("default")],2),e.closeable?n("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:e.close}}):e._e()])},N=[],T=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(s["a"])(this,n),t.apply(this,arguments)}return Object(c["a"])(n,[{key:"close",value:function(){this.closeable&&this.$emit("close")}}]),n}(p["c"]);Object(d["__decorate"])([Object(p["b"])({default:!0})],T.prototype,"closeable",void 0),T=Object(d["__decorate"])([Object(p["a"])({components:{}})],T);var V=T,P=V,M=(n("b6fd"),Object(g["a"])(P,R,N,!1,null,"34fd616f",null)),A=M.exports,$=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(s["a"])(this,n),e=t.apply(this,arguments),e.vvconfig={inline:!0,button:!1,navbar:!1,title:!1,toolbar:!1,tooltip:!1,movable:!0,zoomable:!0,rotatable:!0,scalable:!0,transition:!0,fullscreen:!1,keyboard:!1,url:"data-source"},e}return Object(c["a"])(n,[{key:"zoomInc",value:function(){this.viewer.zoom(.1)}},{key:"zoomDec",value:function(){this.viewer.zoom(-.1)}},{key:"rotateL",value:function(){this.viewer.rotate(-45)}},{key:"rotateR",value:function(){this.viewer.rotate(45)}},{key:"close",value:function(){this.$emit("close")}},{key:"images",get:function(){return Array.isArray(this.image)?this.image:[this.image]}},{key:"viewer",get:function(){var e=this.$el.querySelector(".v-viewer");return e.$viewer}}]),n}(p["c"]);Object(d["__decorate"])([Object(p["b"])()],$.prototype,"image",void 0),$=Object(d["__decorate"])([Object(p["a"])({components:{ModalVue:A}})],$);var D=$,I=D,L=(n("8cf1"),Object(g["a"])(I,E,z,!1,null,"ca508976",null)),S=L.exports,G=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(s["a"])(this,n),e=t.apply(this,arguments),e.modal=!1,e}return n}(p["c"]);Object(d["__decorate"])([Object(p["b"])()],G.prototype,"image",void 0),G=Object(d["__decorate"])([Object(p["a"])({components:{ImageViewerVue:S}})],G);var U=G,B=U,H=(n("e921"),Object(g["a"])(B,x,C,!1,null,"760b9d2a",null)),W=H.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"puzzle"},[e.puzzle.solved?n("div",{staticClass:"solved"},[e._v(" Resuelto ")]):e._e(),"combination"===e.puzzle.type?n("div",[n("CombinationLockVue",{attrs:{code:e.puzzle.config.code,tolerance:e.puzzle.config.tolerance},on:{success:e.success}})],1):"keypad"===e.puzzle.type?n("div",[n("KeypadVue",{attrs:{layout:e.puzzle.config.layout,code:e.puzzle.config.code,font:e.puzzle.config.font},on:{success:e.success}})],1):"wirecut"===e.puzzle.type?n("div",[n("WirecutVue",{attrs:{layout:e.puzzle.config.layout,code:e.puzzle.config.code},on:{success:e.success}})],1):n("div",[e._v(" Unsuppored puzzle "+e._s(e.puzzle.type)+" ")])])},Z=[],q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"keypad"},[n("div",{staticClass:"leds"},e._l(e.leds,(function(e,t){return n("div",{key:t,staticClass:"led",class:e})})),0),n("div",{staticClass:"keypad-btns",style:e.btnsStyle},[e._l(e.layout,(function(t,r){return e._l(t,(function(t,a){return n("div",{key:r+"-"+a,staticClass:"hole"},[t?n("div",{staticClass:"btn",on:{click:function(n){return e.press(t)}}},[n("span","clear"===t?[n("i",{staticClass:"far fa-trash-alt"})]:[e._v(e._s(t))])]):e._e()])}))}))],2)])},K=[];n("cb29"),n("4160"),n("d81d"),n("159b"),n("d3b7");function J(e){return new Promise((function(t){return setTimeout(t,e)}))}var Q=function(){return[["1","2","3"],["4","5","6"],["7","8","9"],["","0","clear"]]},Y=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(s["a"])(this,n),e=t.apply(this,arguments),e.current="",e.enabled=!0,e.leds=[],e}return Object(c["a"])(n,[{key:"mounted",value:function(){this.leds=Array(this.code.length).fill(null).map((function(e){return{active:!1,success:!1,error:!1}}))}},{key:"press",value:function(e){if(this.enabled)if("clear"!==e){var t=e.substring(0,1),n=this.current.length;this.current+=t,this.leds[n].active=!0,this.current.length===this.code.length&&(this.code!==this.current?this.show_error():this.show_success())}else this.clear()}},{key:"clear",value:function(){this.current="",this.leds.forEach((function(e){return e.active=!1}))}},{key:"show_error",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.enabled=!1,this.leds.forEach((function(e){return e.active=!1})),t=0;case 3:if(!(t<3)){e.next=13;break}return this.leds.forEach((function(e){return e.error=!0})),e.next=7,J(200);case 7:return this.leds.forEach((function(e){return e.error=!1})),e.next=10,J(100);case 10:t++,e.next=3;break;case 13:this.clear(),this.enabled=!0;case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"show_success",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.enabled=!1,this.leds.forEach((function(e){return e.active=!1})),this.leds.forEach((function(e){return e.success=!0})),this.$emit("success");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"btnsStyle",get:function(){var e="grid-template-columns: repeat(".concat(this.layout[0].length,", 55px);");return this.font&&(e+="font-family: '".concat(this.font,"';")),e}}]),n}(p["c"]);Object(d["__decorate"])([Object(p["b"])({default:Q})],Y.prototype,"layout",void 0),Object(d["__decorate"])([Object(p["b"])({default:"123"})],Y.prototype,"code",void 0),Object(d["__decorate"])([Object(p["b"])({default:""})],Y.prototype,"font",void 0),Y=Object(d["__decorate"])([Object(p["a"])({components:{}})],Y);var X=Y,ee=X,te=(n("891e"),Object(g["a"])(ee,q,K,!1,null,"3d96e465",null)),ne=te.exports,re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"lock"},[r("img",{staticClass:"shackle",class:{open:e.open},attrs:{src:n("c513")}}),r("img",{attrs:{src:n("9906")}}),r("div",{ref:"dial",staticClass:"dial",class:{enabled:e.enabled}},[e._l(e.numbers,(function(t,n){return r("div",{key:"num"+t,staticClass:"lock-num",style:"transform: rotate("+360*n/e.numbers.length+"deg);"},[e._v(" "+e._s(t)+" ")])})),e._l(e.max,(function(t){return r("div",{key:"mark"+t,staticClass:"lock-mark",class:{step:t%e.step===0},style:"transform: rotate("+360*t/e.max+"deg);"},[r("div")])}))],2),e.open?e._e():r("button",{staticClass:"button reset",on:{click:e.reset}},[e._m(0)])])},ae=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-undo-alt"})])}],oe=(n("ac1f"),n("1276"),n("70ea"),function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(s["a"])(this,n),e=t.apply(this,arguments),e.max=30,e.step=5,e.numbers=[],e.current=0,e.direction=1,e.current_code=[0],e.enabled=!0,e.open=!1,e}return Object(c["a"])(n,[{key:"mounted",value:function(){var e=0;do{this.numbers.push(e),e+=this.step}while(e<this.max);this.propeller=new window.Propeller(this.$refs.dial,{inertia:.5,onRotate:this.onRotate})}},{key:"angle",value:function(){if(!this.propeller)return 0;var e=100*(this.propeller.angle+360);return e%=36e3,e/=100,e}},{key:"onRotate",value:function(){this.current=Math.round((360-this.angle())*this.max/360)}},{key:"onChange",value:function(){if(this.enabled){var e=this.current_code.pop();(this.current-e)*this.direction>0||(this.direction*=-1,this.current_code.push(e)),this.current_code.push(this.current);var t=this.code.split("-").map((function(e){return+e}));while(this.current_code.length>t.length)this.current_code.shift();if(this.current_code.length===t.length){for(var n=!0,r=-1,a=0;a<t.length;a++){r*=-1;for(var o=!1,i=0;i<=this.tolerance;i++)t[a]===this.current_code[a]-i*r&&(o=!0);if(!o){n=!1;break}}n&&this.show_success()}}}},{key:"show_success",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.open=!0,e.next=3,J(1e3);case 3:return this.enabled=!1,e.next=6,J(2e3);case 6:this.$emit("success");case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onChangeEnabled",value:function(){this.enabled?this.propeller.bind():this.propeller.unbind()}},{key:"reset",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:this.enabled=!1;case 3:if(!(Math.abs(this.angle())>=2)){e.next=13;break}if(t=this.current<this.max/2?this.current:this.current-this.max,!(Math.abs(t)<2)){e.next=7;break}return e.abrupt("break",13);case 7:return n=t<0?-10:10,this.propeller.speed=n,e.next=11,J(100);case 11:e.next=3;break;case 13:this.propeller.angle=0,this.propeller.stop(),this.enabled=!0;case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(p["c"]));Object(d["__decorate"])([Object(p["b"])({default:"10-5-15"})],oe.prototype,"code",void 0),Object(d["__decorate"])([Object(p["b"])({default:1})],oe.prototype,"tolerance",void 0),Object(d["__decorate"])([Object(p["d"])("current")],oe.prototype,"onChange",null),Object(d["__decorate"])([Object(p["d"])("enabled")],oe.prototype,"onChangeEnabled",null),oe=Object(d["__decorate"])([Object(p["a"])({components:{}})],oe);var ie=oe,se=ie,ce=(n("522d"),Object(g["a"])(se,re,ae,!1,null,"bbfe0a9c",null)),ue=ce.exports,le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wirecut"},[n("div",{staticClass:"leds"},[n("div",{staticClass:"led",class:e.led1}),n("div",{staticClass:"led",class:e.led2})]),n("div",{staticClass:"content"},[n("svg",{attrs:{height:e.CONTENT_HEIGHT,width:e.CONTENT_WIDTH}},[e._l(e.wires,(function(t,r){return[t.cut?n("g",{key:"c"+r,staticClass:"cuts"},[n("path",{attrs:{d:t.cutA,stroke:t.color}}),n("path",{attrs:{d:t.cutB,stroke:t.color}})]):e._e()]})),e._l(e.wires,(function(t,r){return[t.cut?e._e():n("g",{key:"w"+r,staticClass:"wires",on:{click:function(t){return e.cutWire(r)}}},[n("path",{staticClass:"hover",attrs:{d:t.path}}),n("path",{attrs:{d:t.path,stroke:t.color}})])]}))],2),n("div",{staticClass:"sideA"},[e._l(e.layout.connectorsA,(function(e,t){return[n("div",{key:t,staticClass:"connector",class:{hidden:!e}})]}))],2),n("div",{staticClass:"space"}),n("div",{staticClass:"sideB"},[e._l(e.layout.connectorsB,(function(e,t){return[n("div",{key:t,staticClass:"connector",class:{hidden:!e}})]}))],2)])])},de=[];n("99af");function pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:123;e%=2147483647;var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e=16807*e%2147483647;var r=(e-1)/2147483646;if(t>n){var a=[n,t];t=a[0],n=a[1]}return r*(n-t)+t};return t}var fe=function(){return{connectorsA:["A","B","C",null,"D"],connectorsB:["E","F","G"],wires:[{ini:"A",end:1,color:"#4254f5"},{ini:1,end:0,color:"#f54242"},{ini:"D",end:2,color:"#42f55a"}],seed:2}},he=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(s["a"])(this,n),e=t.apply(this,arguments),e.current_code="",e.CONNECTOR_SIZE=20,e.CONNECTOR_MARGIN=30,e.CONTENT_WIDTH=300,e.enabled=!0,e.wires=[],e.led1={on:!0},e.led2={on:!1},e}return Object(c["a"])(n,[{key:"getConnectorIdx",value:function(e){if("string"!==typeof e)return e;for(var t=0;t<this.layout.connectorsA.length;t++)if(this.layout.connectorsA[t]===e)return t;for(var n=0;n<this.layout.connectorsB.length;n++)if(this.layout.connectorsB[n]===e)return n;return-1}},{key:"mounted",value:function(){var e=this;this.ledsUpdate();var t=pe(this.layout.seed);this.wires=this.layout.wires.map((function(n){var r=function(t){return(e.CONNECTOR_SIZE+e.CONNECTOR_MARGIN)*t+e.CONNECTOR_MARGIN+e.CONNECTOR_SIZE/2},a=function(t){return e.CONNECTOR_SIZE/2+e.CONNECTOR_MARGIN+(e.CONTENT_WIDTH-e.CONNECTOR_SIZE-2*e.CONNECTOR_MARGIN)*t},o=e.getConnectorIdx(n.ini),i=e.getConnectorIdx(n.end),s=Math.min(o,i),c=Math.max(o,i),u=a(0)+" "+r(o),l=a(t(.2,.8))+" "+r(t(s-1,c+1)),d=a(1)+" "+r(i),p="M ".concat(u," Q ").concat(l," ").concat(d),f=a(t(.2,.8)),h=r(t(s,c)),v=t(a(0)+10,f-25)+" "+r(t(s,c)),m=t(f+25,a(1)-10)+" "+r(t(s,c)),b="M ".concat(u," Q ").concat(v," ").concat(f-20," ").concat(h),_="M ".concat(d," Q ").concat(m," ").concat(f+20," ").concat(h);return{path:p,cut:!1,cutA:b,cutB:_,color:n.color}}))}},{key:"ledsUpdate",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.enabled){e.next=9;break}return e.next=3,J(500);case 3:if(this.enabled){e.next=5;break}return e.abrupt("return");case 5:this.led1.on=!this.led1.on,this.led2.on=!this.led2.on,e.next=0;break;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cutWire",value:function(e){if(this.current_code+=e,console.log(this.current_code),this.wires[e].cut=!0,this.code===this.current_code)return this.led1.on=!1,this.led2.on=!1,this.enabled=!1,void this.$emit("success");for(var t=!0,n=0;n<this.current_code.length;n++)this.code[n]!==this.current_code[n]&&(t=!1);t||this.show_failure()}},{key:"show_failure",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.enabled=!1,this.led1.on=!0,this.led2.on=!0,t=200;case 4:if(!(t>20)){e.next=12;break}return e.next=7,J(t);case 7:this.led1.on=!this.led1.on,this.led2.on=!this.led2.on;case 9:t-=10,e.next=4;break;case 12:this.led1.on=!0,this.led2.on=!0,this.$emit("failure");case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"CONTENT_HEIGHT",get:function(){var e=Math.max(this.layout.connectorsA.length,this.layout.connectorsB.length);return(this.CONNECTOR_MARGIN+this.CONNECTOR_SIZE)*e+this.CONNECTOR_MARGIN}}]),n}(p["c"]);Object(d["__decorate"])([Object(p["b"])({default:fe})],he.prototype,"layout",void 0),Object(d["__decorate"])([Object(p["b"])({default:"012"})],he.prototype,"code",void 0),he=Object(d["__decorate"])([Object(p["a"])({components:{}})],he);var ve=he,me=ve,be=(n("34ae"),Object(g["a"])(me,le,de,!1,null,"585d8b9d",null)),_e=be.exports,ye=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(s["a"])(this,n),t.apply(this,arguments)}return Object(c["a"])(n,[{key:"mounted",value:function(){}},{key:"success",value:function(){this.puzzle.solve()}}]),n}(p["c"]);Object(d["__decorate"])([Object(p["b"])()],ye.prototype,"puzzle",void 0),ye=Object(d["__decorate"])([Object(p["a"])({components:{KeypadVue:ne,CombinationLockVue:ue,WirecutVue:_e}})],ye);var ge=ye,Oe=ge,je=(n("f982"),Object(g["a"])(Oe,F,Z,!1,null,"7e1777fb",null)),ke=je.exports,we=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(s["a"])(this,n),e=t.apply(this,arguments),e.loaded=!1,e}return Object(c["a"])(n,[{key:"mounted",value:function(){this.waitLoad()}},{key:"waitLoad",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.room.preload();case 2:this.loaded=!0;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(p["c"]);Object(d["__decorate"])([Object(p["b"])()],we.prototype,"room",void 0),we=Object(d["__decorate"])([Object(p["a"])({components:{ImageVue:W,PuzzleVue:ke}})],we);var xe=we,Ce=xe,Ee=(n("3865"),Object(g["a"])(Ce,k,w,!1,null,"217c1a13",null)),ze=Ee.exports,Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"buttons-bar"},[n("div",{staticClass:"buttons has-addons is-centered"},[n("div",[n("button",{staticClass:"button",on:{click:function(t){e.show_rooms=!e.show_rooms}}},[e._m(0),n("span",[e._v(" Lugares ")])]),e.show_rooms?n("PopoverVue",{on:{close:function(t){e.show_rooms=!1}}},[n("RoomListVue",{attrs:{game:e.game},on:{change:function(t){e.show_rooms=!1}}})],1):e._e()],1)])])},Ne=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon"},[n("i",{staticClass:"far fa-map"})])}],Te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",{staticClass:"title"},[e._v("Lugares")]),n("ul",[e._l(e.game.rooms,(function(t){return["open"===t.status?n("li",{key:t.name},[n("a",{attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),e.changeRoom(t)}}},[e._v(e._s(t.name))]),t.name===e.game.current_room.name?n("span",[e._v(" <--- Estás aquí ")]):e._e()]):e._e()]}))],2)])},Ve=[],Pe=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(s["a"])(this,n),t.apply(this,arguments)}return Object(c["a"])(n,[{key:"changeRoom",value:function(e){this.game.changeRoom(e),this.$emit("change")}}]),n}(p["c"]);Object(d["__decorate"])([Object(p["b"])()],Pe.prototype,"game",void 0),Pe=Object(d["__decorate"])([Object(p["a"])({components:{}})],Pe);var Me=Pe,Ae=Me,$e=Object(g["a"])(Ae,Te,Ve,!1,null,"6b46f680",null),De=$e.exports,Ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"popover"},[n("div",{staticClass:"popover-arrow"}),n("div",{staticClass:"popover-background",on:{click:e.close}}),n("div",{staticClass:"popover-content"},[e._t("default")],2)])},Le=[],Se=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(s["a"])(this,n),t.apply(this,arguments)}return Object(c["a"])(n,[{key:"close",value:function(){this.$emit("close")}}]),n}(p["c"]);Se=Object(d["__decorate"])([Object(p["a"])({components:{}})],Se);var Ge=Se,Ue=Ge,Be=(n("b5b6"),Object(g["a"])(Ue,Ie,Le,!1,null,"2d142ef2",null)),He=Be.exports,We=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(s["a"])(this,n),e=t.apply(this,arguments),e.show_rooms=!1,e.show_inventory=!1,e}return n}(p["c"]);Object(d["__decorate"])([Object(p["b"])()],We.prototype,"game",void 0),We=Object(d["__decorate"])([Object(p["a"])({components:{RoomListVue:De,ModalVue:A,PopoverVue:He}})],We);var Fe=We,Ze=Fe,qe=(n("cae4"),Object(g["a"])(Ze,Re,Ne,!1,null,"375f0d38",null)),Ke=qe.exports,Je=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(s["a"])(this,n),t.apply(this,arguments)}return n}(p["c"]);Object(d["__decorate"])([Object(p["b"])()],Je.prototype,"game",void 0),Je=Object(d["__decorate"])([Object(p["a"])({components:{TopbarVue:j,RoomVue:ze,ButtonsVue:Ke}})],Je);var Qe=Je,Ye=Qe,Xe=(n("d748"),Object(g["a"])(Ye,f,h,!1,null,"056b120e",null)),et=Xe.exports,tt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section"},["select-game"===e.mode?[n("div",{staticClass:"container"},[n("h1",{staticClass:"title is-1"},[e._v("Escape")]),n("h2",{staticClass:"subtitle"},[e._v(" A escape room online ")]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("div",{staticClass:"box"},[n("h3",{staticClass:"title is-3"},[e._v("Juego individual")]),n("p",[e._v(" Escape room ")]),n("p",[n("button",{staticClass:"button",on:{click:e.start_singleplayer}},[e._v("Partida individual")])])])]),n("div",{staticClass:"column"},[n("div",{staticClass:"box"},[n("h3",{staticClass:"title is-3"},[e._v("Juego multijugador")]),n("p",[e._v(" Escape room ")]),n("p",[n("button",{staticClass:"button",on:{click:e.create_multiplayer}},[e._v("Partida multijugador")])])])])])])]:e._e(),"multiplayer"===e.mode?[n("IntroMultiplayerVue",{attrs:{join_game_id:e.join_game_id}})]:e._e()],2)},nt=[],rt=(n("3ca3"),n("841c"),n("ddb0"),n("2b3d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section"},[n("div",{staticClass:"container"},[n("h1",{staticClass:"title is-1"},[e._v("Multiplayer game")]),n("h2",{staticClass:"subtitle"},[e._v(" Sala de espera multijugador ")]),n("p",[e._v(" Nombre del jugador "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.my_name,expression:"my_name"}],attrs:{type:"text"},domProps:{value:e.my_name},on:{input:function(t){t.target.composing||(e.my_name=t.target.value)}}})]),e.multiplayer?n("p",[e._v(" Game: "),n("tt",[e._v(e._s(e.multiplayer.game_id))]),e._v(" "),n("br"),e._v(" Link para unirse: "+e._s(e.join_url)+" "),n("br"),e._v(" Jugadores ( "+e._s(e.user_list.length)+" ) "),n("ul",e._l(e.user_list,(function(t,r){return n("li",{key:r},[e._v(" "+e._s(r+1)+") "+e._s(t)+" ")])})),0)],1):n("p",[e._v(" Connectando al servidor ... ")]),n("p",[e._v(" Chat: ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.chat,expression:"chat"}],staticStyle:{height:"100px",width:"200px"},domProps:{value:e.chat},on:{input:function(t){t.target.composing||(e.chat=t.target.value)}}}),e._v(" "),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.chat_line,expression:"chat_line"}],attrs:{type:"text"},domProps:{value:e.chat_line},on:{input:function(t){t.target.composing||(e.chat_line=t.target.value)}}}),e._v(" "),n("br"),n("button",{staticClass:"button",on:{click:e.chat_send}},[e._v("Enviar")])])])}),at=[],ot=(n("a15b"),n("b0c0"),n("6a7e")),it=n("d382"),st="https://multiplayer.javilabs.es",ct=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(s["a"])(this,n),e=t.apply(this,arguments),e.multiplayer=null,e.join_url="",e.user_list=[],e.my_name="",e.chat="",e.chat_line="",e}return Object(c["a"])(n,[{key:"mounted",value:function(){this.join_game_id?this.join_game(this.join_game_id):this.create_game()}},{key:"create_game",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new ot["ClientV1"](st),e.next=3,t.create();case 3:this.multiplayer=t,this.after_joining();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"join_game",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new ot["ClientV1"](st),e.next=3,n.join(t);case 3:this.multiplayer=n,this.after_joining();case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"after_joining",value:function(){this.multiplayer.onUserData(this.update_game),this.join_url=window.location.href.split("?")[0],this.join_url+="?join="+this.multiplayer.game_id,this.multiplayer.on("chat",this.chat_recv.bind(this)),this.update_game()}},{key:"update_game",value:function(){var e=this;this.multiplayer&&(this.user_list=this.multiplayer.user_list.map((function(t,n){var r=e.multiplayer.user_data[n],a=r.name?r.name:"Sin nombre";return a})))}},{key:"change_name",value:function(e){this.multiplayer&&(this.multiplayer.emitUserData({name:e}),this.update_game())}},{key:"chat_send",value:function(){if(this.chat_line){var e=this.my_name+": "+this.chat_line;this.chat_line="",this.multiplayer.emit("chat",e),this.chat+=e+"\n"}}},{key:"chat_recv",value:function(e){this.chat+=e+"\n"}}]),n}(p["c"]);Object(d["__decorate"])([Object(p["b"])()],ct.prototype,"join_game_id",void 0),Object(d["__decorate"])([Object(p["d"])("my_name"),Object(it["Debounce"])(200)],ct.prototype,"change_name",null),ct=Object(d["__decorate"])([p["a"]],ct);var ut=ct,lt=ut,dt=Object(g["a"])(lt,rt,at,!1,null,"08d6ca47",null),pt=dt.exports,ft=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(s["a"])(this,n),e=t.apply(this,arguments),e.mode="select-game",e.join_game_id=null,e}return Object(c["a"])(n,[{key:"mounted",value:function(){var e=new URLSearchParams(window.location.search),t=e.get("join");t&&(this.join_game_id=t,this.mode="multiplayer")}},{key:"start_singleplayer",value:function(){this.$emit("start-singleplayer")}},{key:"create_multiplayer",value:function(){this.mode="multiplayer"}}]),n}(p["c"]);ft=Object(d["__decorate"])([Object(p["a"])({components:{IntroMultiplayerVue:pt}})],ft);var ht=ft,vt=ht,mt=Object(g["a"])(vt,tt,nt,!1,null,"33e4338f",null),bt=mt.exports,_t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"puzzle-test"},[n("div",[n("h1",[e._v("Tests")]),n("div",[n("WirecutVue")],1),n("div",[n("CombinationLockVue")],1),n("div",[n("KeypadVue")],1),n("div",[n("KeypadVue",{attrs:{layout:e.keypad2_layout,code:"ABCD"}})],1),n("div",[n("KeypadVue",{attrs:{layout:e.keypad2_layout,code:"ABCD",font:"wizardspeak"}})],1)])])},yt=[],gt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(s["a"])(this,n),e=t.apply(this,arguments),e.keypad2_layout=[["A","B","C","D","E"],["X","Y","Z","","clear"]],e}return Object(c["a"])(n,[{key:"mounted",value:function(){}}]),n}(p["c"]);gt=Object(d["__decorate"])([Object(p["a"])({components:{KeypadVue:ne,CombinationLockVue:ue,WirecutVue:_e}})],gt);var Ot=gt,jt=Ot,kt=(n("d991"),Object(g["a"])(jt,_t,yt,!1,null,"749ea99a",null)),wt=kt.exports,xt=(n("498a"),function(){function e(t,n){Object(s["a"])(this,e),this.actions=[],this.solved=!1,this.type=t,this.config=n}return Object(c["a"])(e,[{key:"add",value:function(e){this.actions.push(e)}},{key:"solve",value:function(){this.solved=!0,this.actions.forEach((function(e){return e.run()}))}}]),e}());n("4de4"),n("2ca0"),n("25f0"),n("5319");function Ct(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}))}var Et=!0,zt=Et?console.log:function(){},Rt=n("7805"),Nt=function(){function e(){Object(s["a"])(this,e)}return Object(c["a"])(e,null,[{key:"preload",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.preload_inner(n);case 1:if(e.files[n].finished){t.next=6;break}return t.next=4,J(100);case 4:t.next=1;break;case 6:case"end":return t.stop()}}),t,this)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"preloadFolder",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Rt.keys().filter((function(e){return e.startsWith("./".concat(t,"/"))})).map((function(e){return e.substr(2)})),r=n.map((function(e){return a.preload(e)})),e.next=4,Promise.all(r);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"preload_inner",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.files[n]){t.next=2;break}return t.abrupt("return");case 2:return r={finished:!1},e.files[n]=r,zt("Preloading ".concat(n)),t.next=7,Rt("./"+n);case 7:if(a=t.sent,zt("Preloading ".concat(n," -> ").concat(a)),!e.isSupported()){t.next=14;break}return t.next=12,this.preload_inner_regular(r,n,a);case 12:t.next=16;break;case 14:return t.next=16,this.preload_inner_ugly(r,n,a);case 16:case"end":return t.stop()}}),t,this)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"preload_inner_regular",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=document.createElement("link"),a.rel="preload",a.as=this.getLinkType(n),a.href=r,document.body.appendChild(a),a.onload=function(){zt("Preloaded",n),t.finished=!0},a.onerror=function(e){console.error("Error preloading",n,e),t.finished=!0};case 7:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"getLinkType",value:function(e){var t=e.toLowerCase().split(".").pop();switch(t){case"ttf":return"font";default:return"image"}}},{key:"preload_inner_ugly",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=this.getLinkType(n),e.t0=a,e.next="image"===e.t0?4:"font"===e.t0?7:10;break;case 4:return e.next=6,this.preload_inner_ugly_image(t,n,r);case 6:return e.abrupt("return",e.sent);case 7:return e.next=9,this.preload_inner_ugly_font(t,n,r);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"preload_inner_ugly_image",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:zt("Preload is not supported, using ugly alternative for image"),a=document.createElement("img"),a.src=r,a.onload=function(){zt("Preloaded",n),t.finished=!0},a.onerror=function(e){console.error("Error preloading",n,e),t.finished=!0};case 5:case"end":return e.stop()}}),e)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"preload_inner_ugly_font",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,o,i,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.warn("Preload is not supported, using ugly alternative for font"),t.finished=!0,a="preload-font-"+Ct(),o='\n            @font-face {\n                font-family: "'.concat(a,'";\n                src: url("').concat(r,'");\n            }\n        '),i=document.createElement("style"),document.head.appendChild(i),i.type="text/css",i.appendChild(document.createTextNode(o)),s=document.createElement("div"),c=document.createTextNode("abcefghijklmopqrstuvwxyz"),s.appendChild(c),s.style.cssText="font-family: ".concat(a,"; visibility: hidden;"),document.body.appendChild(s);case 13:case"end":return e.stop()}}),e)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"isSupported",value:function(){var e=function(e,t){if(e&&e.supports)try{return e.supports(t)}catch(n){n instanceof TypeError?console.log("The DOMTokenList doesn't have a supported tokens list"):console.error("That shouldn't have happened")}};return!!e(document.createElement("link").relList,"preload")}}]),e}();Nt.files={};var Tt=n("92e6");function Vt(e){try{return Tt("./"+e)}catch(t){return console.error("Not found asset "+e),null}}var Pt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(s["a"])(this,e),this.assets=[],this.url_prev=null,this.zoom=!1,this.url=Vt(t),this.assets.push(t),n&&(this.url_prev=Vt(n),this.assets.push(n))}return Object(c["a"])(e,[{key:"preload",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.assets.map((function(e){return Nt.preload(e)})),e.next=3,Promise.all(t);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),Mt=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"none";Object(s["a"])(this,e),this.type=t},At=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var r;return Object(s["a"])(this,n),r=t.call(this,"text"),r.text=e,r}return n}(Mt),$t=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var r;return Object(s["a"])(this,n),r=t.call(this,"puzzle"),r.puzzle=e,r}return n}(Mt),Dt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var r;return Object(s["a"])(this,n),r=t.call(this,"image"),r.image=e,r}return n}(Mt),It=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"closed";Object(s["a"])(this,e),this.content=[],this.name=t,this.status=n}return Object(c["a"])(e,[{key:"add",value:function(e){"string"!==typeof e?e instanceof xt?this.content.push(new $t(e)):e instanceof Pt&&this.content.push(new Dt(e)):this.content.push(new At(e))}},{key:"preload",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],this.content.forEach((function(e){e instanceof Dt&&t.push(e.image.preload())})),e.next=4,Promise.all(t);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),Lt=function(){function e(){Object(s["a"])(this,e),this.rooms=[],this.current_room=null}return Object(c["a"])(e,[{key:"add",value:function(e){if(e instanceof It)return this.current_room||(this.current_room=e),void this.rooms.push(e)}},{key:"changeRoom",value:function(e){this.current_room=e}}]),e}(),St=function(){function e(t,n){Object(s["a"])(this,e),this.room=t,this.action=n}return Object(c["a"])(e,[{key:"run",value:function(){switch(console.log(this.action),console.log(this.room),this.action){case"open":this.room.status="open";break}}}]),e}(),Gt=function(){function e(t){Object(s["a"])(this,e),this.text=t}return Object(c["a"])(e,[{key:"run",value:function(){window.alert(this.text)}}]),e}();function Ut(){var e=new Lt,t=new Pt("escape-test/book-open.png","escape-test/book-closed.jpg");t.zoom=!0;var n=new It("Vestíbulo","open");n.add("\n    Estás en el vestíbulo. Ante tí hay una puerta, posas tu mano en el pomo\n    pensando que intrincados acertijos deberás resolver cuando de pronto\n    te das cuenta que la puerta ya está abierta.\n    Un poco decepcionado prosigues con tu aventura.\n    "),n.add("\n    Utiliza el menú de lugares para moverte entre localizaciones.\n    ");var r=new It("Salón","open"),a=new It("Habitación final");r.add("\n        Estás en el salón, una habitación sin ninǵun tipo de mobiliario.\n        En el suelo pareces distinguir un libro.\n        Además hay una puerta con un candado numérico que te impide el paso\n        a la habitación final.\n    "),r.add(t);var o=new xt("combination",{code:"10-5-15"}),i=new St(a,"open");return o.add(i),o.add(new Gt("\n        Muy bien, tus habilidades investigadores superiores te han permitido solucionar la prueba.\n        Ahora puedes entrar en la habitación final.\n        \n    ".trim())),r.add(o),n.add(o),a.add("Triunfante entras en la habitación final. Has ganado."),e.add(n),e.add(r),e.add(a),e}function Bt(){var e=new Lt,t=new Pt("escape-test/book-open.png","escape-test/book-closed.jpg");t.zoom=!0;var n=new It("Habitación de tests","open");n.add("\n    Estás en al habitación de test. Esta página solo sirve para probar los\n    elementos del juego.\n    "),n.add("\n    Utiliza el menú de lugares para moverte entre localizaciones.\n    También hay un libro:\n    "),n.add(t),n.add("\n    Y unos cuantos cacharros:\n    "),n.add("El primero es un candado con combinación 10-5-15");var r=new xt("combination",{code:"10-5-15"});n.add(r),n.add("El segundo es un dispositivo electrónico con extraños símbolos. No sabes la combinación pero pulsar los 4 primos números puede ser una buena opción");var a=new xt("keypad",{code:"ABCD",layout:[["A","B","C","D","E"],["X","Y","Z","","clear"]],font:"wizardspeak"});n.add(a),n.add("Por último, hay una panel eléctrico con unos cables sueltos");var o=new xt("wirecut",{code:"012",layout:{connectorsA:["A","B","C",null,"D"],connectorsB:["E","F","G"],wires:[{ini:"A",end:1,color:"#4254f5"},{ini:1,end:0,color:"#f54242"},{ini:"D",end:2,color:"#42f55a"}],seed:2}});return n.add(o),e.add(n),e}var Ht=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(s["a"])(this,n),e=t.apply(this,arguments),e.loaded=!1,e.game=null,e}return Object(c["a"])(n,[{key:"mounted",value:function(){this.waitLoad()}},{key:"waitLoad",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Nt.preloadFolder("fonts");case 2:return e.next=4,Nt.preloadFolder("base");case 4:return e.next=6,Nt.preloadFolder("puzzles");case 6:this.loaded=!0;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"start_singleplayer",value:function(){this.game=Ut()}},{key:"tests",value:function(){this.game=Bt()}}]),n}(p["c"]);Ht=Object(d["__decorate"])([Object(p["a"])({components:{GameVue:et,IntroVue:bt,PuzzleTestVue:wt}})],Ht);var Wt=Ht,Ft=Wt,Zt=(n("5c0b"),Object(g["a"])(Ft,a,o,!1,null,null,null)),qt=Zt.exports,Kt=(n("0808"),n("6944")),Jt=n.n(Kt);r["a"].use(Jt.a),r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(qt)}}).$mount("#app")},d748:function(e,t,n){"use strict";var r=n("0279"),a=n.n(r);a.a},d991:function(e,t,n){"use strict";var r=n("0993"),a=n.n(r);a.a},e921:function(e,t,n){"use strict";var r=n("294f"),a=n.n(r);a.a},f982:function(e,t,n){"use strict";var r=n("ae99"),a=n.n(r);a.a}});
//# sourceMappingURL=app.76f1927f.js.map